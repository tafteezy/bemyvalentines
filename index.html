<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Valentine Link ðŸ’Œ</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="card">
  <h1>Create a Valentine Link ðŸ’–</h1>

  <input id="senderName" placeholder="Your name ðŸ’Œ">
  <input id="senderEmail" type="email" placeholder="Your email (you get the response)">
  <input id="recipientName" placeholder="Their name ðŸ’˜">

  <button onclick="generateLink()">Generate Link</button>

  <p id="result"></p>
</div>

<script>
function generateLink() {
  const senderName = senderNameInput.value.trim();
  const senderEmail = senderEmailInput.value.trim();
  const recipientName = recipientNameInput.value.trim();

  if (!senderName || !senderEmail || !recipientName) {
    alert("Fill in all fields ðŸ’Œ");
    return;
  }

  const params = new URLSearchParams({
    sender: senderName,
    email: senderEmail,
    recipient: recipientName
  });

  // Fixed: Uses the current page's path to automatically get the correct base URL
  const pathArray = window.location.pathname.split('/');
  const basePath = pathArray.slice(0, -1).join('/');
  const link = `${window.location.origin}${basePath}/valentine.html?${params}`;

    result.innerHTML = `
    ðŸ’– Link ready! <br><br>

    <a href="${link}" target="_blank">${link}</a><br><br>

    <button onclick="shareWhatsApp('${encodeURIComponent(link)}')">
        Share on WhatsApp ðŸ’¬
    </button>

    <p>Send this link to <b>${recipientName}</b></p>
    `;

}

function shareWhatsApp(link) {
  const message = `ðŸ’˜ I have a question for you...\n\nClick here ðŸ‘‰ ${link}`;
  const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
}


const senderNameInput = document.getElementById("senderName");
const senderEmailInput = document.getElementById("senderEmail");
const recipientNameInput = document.getElementById("recipientName");
const result = document.getElementById("result");
</script>

</body>
</html>
